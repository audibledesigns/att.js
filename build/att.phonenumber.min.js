(function(){var n=this,e={},o={},t=e.util={_uuidCounter:0,uuid:function(){return Math.random().toString(16).substring(2)+(t._uuidCounter++).toString(16)},slice:Array.prototype.slice,isFunc:function(n){return"[object Function]"==Object.prototype.toString.call(n)},extend:function(n){return this.slice.call(arguments,1).forEach(function(e){if(e)for(var o in e)n[o]=e[o]}),n},each:function(n,e){if(n)if(n instanceof Array)n.forEach(e);else for(var o in n)e(o,n[o])},getQueryParam:function(n){var e=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),o="[\\?&]"+e+"=([^&#]*)",t=RegExp(o),i=t.exec(window.location.search);return i?decodeURIComponent(i[1].replace(/\+/g," ")):void 0},h2sSupport:function(){return"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/536.4 (KHTML, like Gecko) Chrome/19.0.1077.0 Safari/536.4"==window.navigator.userAgent||"Mozilla/5.0 (iPhone; CPU iPhone OS 6_0_1 like Mac OS X) AppleWebKit/536.26 (KHTML, like Gecko) Mobile/10A523"==window.navigator.userAgent||window.webkitPeerConnection00&&-1!==window.navigator.userAgent.indexOf("Chrome/24")},getMe:function(n,e){function t(n){return n.split("@")[0]}var i,r="https://auth.tfoundry.com",a={access_token:n};return o.me?e(o.me):(console.log(a),$.ajax({data:a,dataType:"json",url:r+"/me.json",success:function(n){var c=function(){var e;try{e=n.identifiers.external_id[0]}catch(o){}return e}();o.me=n,n.imsNumber=n.ims_phone_number||c,n.imsNumber&&(n.imsNumber=t(n.imsNumber)),n.virtualNumber=n.conference_phone_number,n.ims_phone_number||c?i="a1":n.conference_phone_number&&(i="a3"),$.ajax({data:a,dataType:"json",url:r+"/users/"+n.uid+"/api_services/webrtc.json",success:function(o){var t=o&&o.version;n.version=t?"a"+t:i||"a3",n.number="a3"===n.version?n.virtualNumber||n.phone_number:n.imsNumber||n.phone_number,e(n)}})}}),void 0)}},i={};i.stringify=function(n){var e,o=i.parse(n),t=o.length,r="1"===o.charAt(0),a=o.split("");return t>(r?11:10)?o:!r&&4>t?o:(r&&a.splice(0,1),r?t>1&&(e=4-t,e=e>0?e:0,a.splice(0,0," ("),a.splice(4,0,Array(e+1).join(" ")+") "),t>7&&a.splice(8,0,"-")):t>7?(a.splice(0,0,"("),a.splice(4,0,") "),a.splice(8,0,"-")):t>3&&a.splice(3,0,"-"),(r?"1":"")+a.join(""))},i.parse=function(n){return(n+"").toUpperCase().replace(/[A-Z]/g,function(n){return 0|(n.charCodeAt(0)-65)/3+2-("SVYZ".indexOf(n)>-1)}).replace(/\D/g,"")},i.getCallable=function(n,e){var o=e||"us",t=i.parse(n);return 10!==t.length?"us"==o&&11===t.length&&"1"===t.charAt(0)?t:!1:"us"==o?"1"+t:void 0},e.phoneNumber=i,"undefined"!=typeof exports?module.exports=e:(n.ATT||(n.ATT={}),t.extend(n.ATT,e))}).call(this);